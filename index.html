<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reunion Hill Family Portal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: #333;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }

    .header {
        text-align: center;
        margin-bottom: 40px;
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }

    .header h1 {
        color: #667eea;
        font-size: 2.5em;
        margin-bottom: 10px;
    }

    .header p {
        color: #666;
        font-size: 1.1em;
    }

    .auth-section {
        text-align: center;
        background: white;
        padding: 40px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        margin-bottom: 30px;
    }

    .enter-btn {
        background: #667eea;
        color: white;
        border: none;
        padding: 15px 30px;
        font-size: 18px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 10px;
    }

    .enter-btn:hover {
        background: #5a67d8;
        transform: translateY(-2px);
    }

    .main-content {
        display: none;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 30px;
    }

    .feature-card {
        background: white;
        padding: 25px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        transition: transform 0.3s, box-shadow 0.3s;
        cursor: pointer;
        text-align: center;
    }

    .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.15);
    }

    .feature-icon {
        font-size: 3em;
        margin-bottom: 15px;
        color: #667eea;
    }

    .feature-card h3 {
        margin-bottom: 10px;
        color: #333;
        font-size: 1.3em;
    }

    .feature-card p {
        color: #666;
        line-height: 1.5;
    }

    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 1000;
    }

    .modal-content {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        background: white;
        padding: 20px;
        overflow-y: auto;
        z-index: 1001;
        display: flex;
        flex-direction: column;
    }

    .modal-content h2 {
        margin-top: 60px;
        margin-bottom: 30px;
        text-align: center;
        color: #667eea;
        font-size: 2.5em;
        flex-shrink: 0;
    }

    .modal-body {
        flex: 1;
        display: flex;
        flex-direction: column;
        min-height: 0;
    }

    .close-btn {
        position: fixed;
        top: 20px;
        right: 30px;
        font-size: 32px;
        cursor: pointer;
        background: #fff;
        border: 2px solid #ddd;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #666;
        z-index: 1002;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .close-btn:hover {
        background: #f0f0f0;
        color: #333;
    }

    .family-tabs {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 20px;
        justify-content: center;
    }

    .family-tab {
        background: #667eea;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 25px;
        cursor: pointer;
        transition: background 0.3s;
    }

    .family-tab:hover {
        background: #5a67d8;
    }

    .directory-content {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        min-height: 300px;
        flex: 1;
    }

    .contact-form {
        max-width: 500px;
        margin: 0 auto;
    }

    .form-group {
        margin-bottom: 20px;
    }

    .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
    }

    .form-group input,
    .form-group textarea {
        width: 100%;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 16px;
    }

    .form-group textarea {
        height: 120px;
        resize: vertical;
    }

    .submit-btn {
        background: #667eea;
        color: white;
        border: none;
        padding: 12px 30px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        width: 100%;
    }

    .submit-btn:hover {
        background: #5a67d8;
    }

    iframe {
        width: 100%;
        flex: 1;
        border: none;
        border-radius: 5px;
        min-height: 400px;
    }

    /* Photo upload styles */
    .upload-area {
        border: 2px dashed #667eea;
        border-radius: 10px;
        padding: 40px;
        text-align: center;
        background: #f8f9fa;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 20px;
    }

    .upload-area:hover {
        border-color: #5a67d8;
        background: #e8f2ff;
    }

    .upload-area.dragover {
        border-color: #5a67d8;
        background: #e8f2ff;
        transform: scale(1.02);
    }

    .upload-icon {
        font-size: 3em;
        color: #667eea;
        margin-bottom: 15px;
    }

    .file-input {
        display: none;
    }

    .upload-progress {
        display: none;
        margin-top: 20px;
        padding: 15px;
        background: #e8f2ff;
        border-radius: 5px;
        text-align: center;
    }

    .progress-bar {
        width: 100%;
        height: 8px;
        background: #ddd;
        border-radius: 4px;
        overflow: hidden;
        margin: 10px 0;
    }

    .progress-fill {
        height: 100%;
        background: #667eea;
        width: 0%;
        transition: width 0.3s ease;
    }

    /* Photo gallery styles */
    .photo-gallery {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 15px;
        padding: 20px 0;
    }

    .photo-item {
        position: relative;
        aspect-ratio: 1;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        cursor: pointer;
        transition: transform 0.3s ease;
    }

    .photo-item:hover {
        transform: scale(1.05);
    }

    .photo-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .photo-overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(transparent, rgba(0,0,0,0.7));
        color: white;
        padding: 15px 10px 10px;
        font-size: 0.9em;
    }

    .loading-spinner {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid #f3f3f3;
        border-top: 3px solid #667eea;
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    @media (max-width: 768px) {
        .container {
            padding: 10px;
        }
        
        .header h1 {
            font-size: 2em;
        }
        
        .main-content {
            grid-template-columns: 1fr;
        }
        
        .family-tabs {
            justify-content: center;
        }
        
        .family-tab {
            font-size: 14px;
            padding: 8px 15px;
        }

        .modal-content {
            padding: 10px;
        }

        .modal-content h2 {
            font-size: 2em;
            margin-top: 50px;
        }

        .close-btn {
            top: 10px;
            right: 15px;
            font-size: 24px;
            width: 40px;
            height: 40px;
        }

        .photo-gallery {
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
        }
    }

    @media (max-width: 480px) {
        .modal-content {
            padding: 0;
            overflow: hidden;
        }

        .modal-content h2 {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            margin: 0;
            padding: 15px 50px 15px 15px;
            font-size: 1.3em;
            background: white;
            z-index: 1002;
            border-bottom: 1px solid #eee;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-body {
            position: absolute;
            top: 60px;
            left: 0;
            right: 0;
            bottom: 0;
            padding: 10px;
            overflow-y: auto;
        }

        .close-btn {
            position: fixed;
            top: 10px;
            right: 10px;
            font-size: 20px;
            width: 35px;
            height: 35px;
            z-index: 1003;
            background: rgba(255, 255, 255, 0.95);
        }

        iframe {
            width: 100%;
            height: calc(100vh - 80px);
            border: none;
            margin: 0;
            padding: 0;
        }

        .photo-gallery {
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        }

        .upload-area {
            padding: 20px;
        }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè° Reunion Hill Family Portal</h1>
            <p>A place for the Family to reunite and make memories</p>
        </div>

```
    <div class="auth-section" id="authSection">
        <h2>Welcome to the Reunion Hill Family Portal</h2>
        <p style="margin: 20px 0;">Access your family's resources and information</p>
        <button class="enter-btn" onclick="enterPortal()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
            </svg>
            Enter Family Portal
        </button>
        <p style="margin-top: 15px; font-size: 0.9em; color: #666;">
            Family members and authorized users
        </p>
    </div>

    <div class="main-content" id="mainContent">
        <div class="feature-card" onclick="openModal('reservationModal')">
            <div class="feature-icon">üìÖ</div>
            <h3>Make a Reservation</h3>
            <p>Reserve your dates at Reunion Hill</p>
        </div>

        <div class="feature-card" onclick="openModal('directoryModal')">
            <div class="feature-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
            <h3>Family Directory</h3>
            <p>View and update family member information</p>
        </div>

        <div class="feature-card" onclick="openModal('calendarModal')">
            <div class="feature-icon">üóìÔ∏è</div>
            <h3>Family Calendar</h3>
            <p>View upcoming events and reservations</p>
        </div>

        <div class="feature-card" onclick="openLLCDocuments()">
            <div class="feature-icon">üìã</div>
            <h3>LLC Documents</h3>
            <p>Access official business documents</p>
        </div>

        <div class="feature-card" onclick="openModal('uploadModal')">
            <div class="feature-icon">üì∑</div>
            <h3>Upload a Picture</h3>
            <p>Share a picture of a recent memory made while at Montreat</p>
        </div>

        <div class="feature-card" onclick="openPhotosGallery()">
            <div class="feature-icon">üñºÔ∏è</div>
            <h3>View Pictures</h3>
            <p>Browse family photos and memories</p>
        </div>

        <div class="feature-card" onclick="openModal('contactModal')">
            <div class="feature-icon">‚úâÔ∏è</div>
            <h3>Contact Admin</h3>
            <p>Send a message to the administrator</p>
        </div>
    </div>
</div>

<!-- Reservation Modal -->
<div class="modal" id="reservationModal">
    <div class="modal-content">
        <button class="close-btn" onclick="closeModal('reservationModal')">&times;</button>
        <h2>Make a Reservation</h2>
        <div class="modal-body">
            <p style="text-align: center; margin-bottom: 20px; font-size: 1.1em; color: #666;">
                Use the form below to request your reservation dates:
            </p>
            <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSexq82ADg5c-l7JBg7HT9vfPzqpg2whpQZrjIzZ91r6fV4MFw/viewform?embedded=true" 
                    frameborder="0" marginheight="0" marginwidth="0">Loading‚Ä¶</iframe>
        </div>
    </div>
</div>

<!-- Directory Modal -->
<div class="modal" id="directoryModal">
    <div class="modal-content">
        <button class="close-btn" onclick="closeModal('directoryModal')">&times;</button>
        <h2>Family Directory</h2>
        <div class="modal-body">
            <div class="family-tabs">
                <button class="family-tab" onclick="showFamily('jennings')">Jennings</button>
                <button class="family-tab" onclick="showFamily('almeida')">Almeida</button>
                <button class="family-tab" onclick="showFamily('evans')">Evans</button>
                <button class="family-tab" onclick="showFamily('patteson')">Patteson</button>
                <button class="family-tab" onclick="showFamily('riley')">Riley</button>
                <button class="family-tab" onclick="showFamily('crawford')">Crawford</button>
            </div>
            
            <div class="directory-content" id="directoryContent">
                <div style="text-align: center; padding: 40px;">
                    <div style="font-size: 3em; margin-bottom: 20px;">üìã</div>
                    <h3 style="color: #667eea; margin-bottom: 20px;">Family Directory Access</h3>
                    <p style="color: #666; line-height: 1.6; margin-bottom: 30px;">
                        Click on any family name above to view their directory information.<br>
                        Each family's details will open within the app for easy viewing and editing.
                    </p>
                    <p style="color: #888; font-size: 0.9em;">
                        Family members can update their own information directly.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Calendar Modal -->
<div class="modal" id="calendarModal">
    <div class="modal-content">
        <button class="close-btn" onclick="closeModal('calendarModal')">&times;</button>
        <h2>Reunion Hill Calendar</h2>
        <div class="modal-body">
            <iframe src="https://calendar.google.com/calendar/embed?src=reunionhill%40gmail.com&ctz=America%2FNew_York" 
                    frameborder="0" marginheight="0" marginwidth="0">Loading calendar...</iframe>
        </div>
    </div>
</div>

<!-- Upload Photo Modal -->
<div class="modal" id="uploadModal">
    <div class="modal-content">
        <button class="close-btn" onclick="closeModal('uploadModal')">&times;</button>
        <h2>Upload a Picture</h2>
        <div class="modal-body">
            <p style="text-align: center; margin-bottom: 30px; font-size: 1.1em; color: #666;">
                Share a picture of a recent memory made while at Montreat
            </p>
            
            <div class="upload-area" onclick="triggerFileInput()" id="uploadArea">
                <div class="upload-icon">üì∑</div>
                <h3 style="margin-bottom: 10px; color: #667eea;">Click to Upload Photo</h3>
                <p style="color: #666; margin-bottom: 15px;">
                    Drag and drop your photo here, or click to select
                </p>
                <p style="color: #888; font-size: 0.9em;">
                    Supports JPG, PNG, and other image formats
                </p>
            </div>
            
            <input type="file" id="photoInput" class="file-input" accept="image/*" onchange="handleFileSelect(event)">
            
            <div class="upload-progress" id="uploadProgress">
                <p>Uploading to Google Drive Photos folder...</p>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p id="progressText">0%</p>
            </div>
            
            <div style="text-align: center; margin-top: 20px; color: #666; font-size: 0.9em;">
                <p>Photos will be uploaded to the family Photos folder in Google Drive</p>
            </div>
        </div>
    </div>
</div>

<!-- Contact Modal -->
<div class="modal" id="contactModal">
    <div class="modal-content">
        <button class="close-btn" onclick="closeModal('contactModal')">&times;</button>
        <h2>Contact Administrator</h2>
        <div class="modal-body">
            <div class="contact-form">
                <form id="contactForm" onsubmit="sendMessage(event)">
                    <div class="form-group">
                        <label for="senderName">Your Name</label>
                        <input type="text" id="senderName" required>
                    </div>
                    <div class="form-group">
                        <label for="senderEmail">Your Email</label>
                        <input type="email" id="senderEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="messageSubject">Subject</label>
                        <input type="text" id="messageSubject" required>
                    </div>
                    <div class="form-group">
                        <label for="messageBody">Message</label>
                        <textarea id="messageBody" required placeholder="Type your message here..."></textarea>
                    </div>
                    <button type="submit" class="submit-btn">Send Message</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    // FIXED: Simple, clean JavaScript with proper error handling
    function enterPortal() {
        try {
            var authSection = document.getElementById('authSection');
            var mainContent = document.getElementById('mainContent');
            
            if (authSection) authSection.style.display = 'none';
            if (mainContent) mainContent.style.display = 'grid';
        } catch (error) {
            alert('Error entering portal. Please refresh the page.');
        }
    }

    function openModal(modalId) {
        try {
            var modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        } catch (error) {
            alert('Error opening modal. Please refresh the page.');
        }
    }

    function closeModal(modalId) {
        try {
            var modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        } catch (error) {
            alert('Error closing modal. Please refresh the page.');
        }
    }

    function showFamily(familyName) {
        try {
            closeModal('directoryModal');
            
            var sheetModal = document.createElement('div');
            sheetModal.className = 'modal';
            sheetModal.id = 'sheetModal';
            sheetModal.style.display = 'block';
            
            var tabGids = {
                'jennings': '983585983',       
                'almeida': '125647568',
                'evans': '157418657',     
                'patteson': '157772354',  
                'riley': '341548763',     
                'crawford': '213369466'   
            };
            
            var gid = tabGids[familyName.toLowerCase()] || '0';
            var SHEETS_ID = '1Fj6JKLC6fZdEU8QbZXr43JNH__8ec8NjEz0aCDLQRXY';
            var embedUrl = 'https://docs.google.com/spreadsheets/d/' + SHEETS_ID + '/edit?usp=sharing&single=true&gid=' + gid + '&widget=true&headers=true&rm=minimal';
            
            sheetModal.innerHTML = '<div class="modal-content" style="padding: 0; margin: 0;">' +
                '<button class="close-btn" onclick="closeSheetModal()" style="z-index: 1003;">&times;</button>' +
                '<div style="position: fixed; top: 0; left: 0; width: 100vw; height: 60px; background: #667eea; z-index: 1002; display: flex; align-items: center; justify-content: center; color: white;">' +
                '<h2 style="margin: 0; font-size: 1.5em;">' + familyName.charAt(0).toUpperCase() + familyName.slice(1) + ' Family Directory</h2>' +
                '</div>' +
                '<iframe src="' + embedUrl + '" ' +
                'id="sheetFrame" ' +
                'style="position: absolute; top: 60px; left: 0; width: 100%; height: calc(100vh - 60px); border: none; margin: 0; padding: 0;" ' +
                'frameborder="0" marginheight="0" marginwidth="0">' +
                'Loading family directory...' +
                '</iframe>' +
                '</div>';
            
            document.body.appendChild(sheetModal);
            document.body.style.overflow = 'hidden';
        } catch (error) {
            alert('Error loading family directory. Please try again.');
        }
    }

    function closeSheetModal() {
        try {
            var sheetModal = document.getElementById('sheetModal');
            if (sheetModal) {
                sheetModal.remove();
            }
            document.body.style.overflow = 'auto';
            openModal('directoryModal');
        } catch (error) {
            document.body.style.overflow = 'auto';
        }
    }

    function openLLCDocuments() {
        try {
            var driveModal = document.createElement('div');
            driveModal.className = 'modal';
            driveModal.id = 'driveModal';
            driveModal.style.display = 'block';
            
            var FOLDER_ID = '1cNkv_tVhwPBEhB43CvTeM2J-KDfMDumo';
            var embedUrl = 'https://drive.google.com/embeddedfolderview?id=' + FOLDER_ID + '#grid';
            
            driveModal.innerHTML = '<div class="modal-content" style="padding: 0; margin: 0;">' +
                '<button class="close-btn" onclick="closeDriveModal()" style="z-index: 1003;">&times;</button>' +
                '<div style="position: fixed; top: 0; left: 0; width: 100vw; height: 60px; background: #667eea; z-index: 1002; display: flex; align-items: center; justify-content: center; color: white;">' +
                '<h2 style="margin: 0; font-size: 1.5em;">LLC Business Documents</h2>' +
                '</div>' +
                '<iframe src="' + embedUrl + '" ' +
                'style="position: absolute; top: 60px; left: 0; width: 100%; height: calc(100vh - 60px); border: none; margin: 0; padding: 0;" ' +
                'frameborder="0" marginheight="0" marginwidth="0">' +
                'Loading LLC documents...' +
                '</iframe>' +
                '</div>';
            
            document.body.appendChild(driveModal);
            document.body.style.overflow = 'hidden';
        } catch (error) {
            alert('Error loading LLC documents. Please try again.');
        }
    }

    function closeDriveModal() {
        try {
            var driveModal = document.getElementById('driveModal');
            if (driveModal) {
                driveModal.remove();
            }
            document.body.style.overflow = 'auto';
        } catch (error) {
            document.body.style.overflow = 'auto';
        }
    }

    function openPhotosGallery() {
        try {
            var photosModal = document.createElement('div');
            photosModal.className = 'modal';
            photosModal.id = 'photosModal';
            photosModal.style.display = 'block';
            
            // Using a specific Photos folder ID - you'll need to create this folder and get its ID
            var PHOTOS_FOLDER_ID = '1YourPhotosfolderIDHere'; // Replace with actual Photos folder ID
            var embedUrl = 'https://drive.google.com/embeddedfolderview?id=' + PHOTOS_FOLDER_ID + '#grid';
            
            photosModal.innerHTML = '<div class="modal-content" style="padding: 0; margin: 0;">' +
                '<button class="close-btn" onclick="closePhotosModal()" style="z-index: 1003;">&times;</button>' +
                '<div style="position: fixed; top: 0; left: 0; width: 100vw; height: 60px; background: #667eea; z-index: 1002; display: flex; align-items: center; justify-content: center; color: white;">' +
                '<h2 style="margin: 0; font-size: 1.5em;">Family Photos</h2>' +
                '</div>' +
                '<iframe src="' + embedUrl + '" ' +
                'style="position: absolute; top: 60px; left: 0; width: 100%; height: calc(100vh - 60px); border: none; margin: 0; padding: 0;" ' +
                'frameborder="0" marginheight="0" marginwidth="0">' +
                'Loading family photos...' +
                '</iframe>' +
                '</div>';
            
            document.body.appendChild(photosModal);
            document.body.style.overflow = 'hidden';
        } catch (error
```
